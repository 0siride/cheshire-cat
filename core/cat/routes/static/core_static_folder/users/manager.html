<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User manager</title>
    <link rel="stylesheet" href="{{ url_for('core-static', path='/core.css') }}">
    <link rel="stylesheet" href="{{ url_for('core-static', path='/users/manager.css') }}">

    <!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">-->

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>
    <div x-data="userManagement()" class="">
        <!--<img id="logo" src="{{ url_for('core-static', path='/img/logo.svg') }}" class="w-20">-->
        <h1 class="">User Manager</h1>

        <div class="">
            <input x-model="newUser.name" type="text" placeholder="Name" class="">
            <input x-model="newUser.role" type="text" placeholder="Role" class="">
            <button @click="addUser()" class="">Add User</button>
        </div>

        <div>
            <template x-for="user in users" :key="user.id">
                <div class="">
                    <span x-show="!user.editing" x-text="`${user.name} - ${user.role}`"></span>
                    <input x-show="user.editing" x-model="user.name" type="text" class="">
                    <input x-show="user.editing" x-model="user.role" type="text" class="">
                    <div>
                        <button @click="toggleEdit(user)" class=""
                            x-text="user.editing ? 'Save' : 'Edit'"></button>
                        <button @click="removeUser(user.id)" class="">Delete</button>
                    </div>    
                </div>
            </template>
        </div>
    </div>

    <script>
        function userManagement() {
            return {
                users: [
                    { id: 1, name: 'Alice', role: 'admin', editing: false },
                    { id: 2, name: 'Bob', role: 'user', editing: false }
                ],
                newUser: { name: '', role: '' },
                addUser() {
                    if (this.newUser.name && this.newUser.role) {
                        this.users.push({
                            id: Date.now(),
                            name: this.newUser.name,
                            role: this.newUser.role,
                            editing: false
                        });
                        this.newUser.name = '';
                        this.newUser.role = '';
                    }
                },
                removeUser(id) {
                    this.users = this.users.filter(user => user.id !== id);
                },
                toggleEdit(user) {
                    if (user.editing) {
                        // Save logic can be added here
                    }
                    user.editing = !user.editing;
                }
            };
        }
    </script>
</body>

</html>